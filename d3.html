<!doctype html>

<meta charset="utf-8">
<title>工作流程图</title>
<head>

<script src="Content/jQuery-2.1.4.min.js"></script>
<script src="Content/plugins/d3/d3.v4.js"></script>
<script src="Content/plugins/d3/dagre-d3.js"></script>
<link rel="stylesheet" href="Content/plugins/d3/magic-check.min.css">
<link rel="stylesheet" href="Content/plugins/d3/tipsy.css">
<script src="Content/plugins/d3/tipsy.js"></script>
<script src="Content/plugins/d3/page-d3.js"></script>
</head>
<body>
<div class="viewtitle">
<span class="title">我的流程图</span>
<div class="chart-tags">
<i class="icons iconfont">&#xe71e;</i>
<a class="chart-tag">流程图</a>
<a class="chart-tag">D3</a>
</div>
<div class="chart-des"></div>
<i class="icons iconfont down">&#xe63e;</i>
</div>
<button class="btn-setting"><i class="iconfont">&#xe613;</i></button>
<aside class="aside-container">
  <p class="text-semibold text-main mar-no">显示设置</p>
   <div class="mar-btm">
    <label class="lable-text">连接线</label>
    <div class="radio" name="curve">
              <input id="line-radio1" value="curveBasis" class="magic-radio" type="radio" name="line-radio" checked>
              <label for="line-radio1">平滑</label>
              <input id="line-radio2" value="curveLinear" class="magic-radio" type="radio" name="line-radio">
              <label for="line-radio2">转折</label>
    </div>
  </div>
  <hr>
   <div class="mar-btm">
    <label class="lable-text">箭头</label>
    <div class="radio" name="arrowhead">
              <input id="arrow-radio1" value="vee" class="magic-radio" type="radio" name="arrow-radio" checked>
              <label for="arrow-radio1">尖角</label>
              <input id="arrow-radio2" value="normal" class="magic-radio" type="radio" name="arrow-radio">
              <label for="arrow-radio2">三角</label>
              <input id="arrow-radio3" value="undirected" class="magic-radio" type="radio" name="arrow-radio">
              <label for="arrow-radio3">无</label>
    </div>
  </div>
  <hr>
    <div class="mar-btm labelpos">
    <label class="lable-text">字位置</label>
    <div class="radio" name="labelpos">
              <input id="lable-radio1"  value="l" class="magic-radio" type="radio" name="lable-radio">
              <label for="lable-radio1">左</label>
              <input id="lable-radio2" value="c" class="magic-radio" type="radio" name="lable-radio" checked>
              <label for="lable-radio2">中</label>
              <input id="lable-radio3" value="r" class="magic-radio" type="radio" name="lable-radio">
              <label for="lable-radio3">右</label>
    </div>
  </div>
   <hr>
    <div class="mar-btm">
    <label class="lable-text">图方向</label>
    <div class="radio" name="rankdir">
              <input id="p-radio1" value="TB" class="magic-radio" type="radio" name="p-radio">
              <label for="p-radio1">上下</label>
              <input id="p-radio2" value="BT" class="magic-radio" type="radio" name="p-radio">
              <label for="p-radio2">下上</label>
              <input id="p-radio3" value="LR" class="magic-radio" type="radio" name="p-radio" checked>
              <label for="p-radio3">左右</label>
              <input id="p-radio4" value="RL" class="magic-radio" type="radio" name="p-radio">
              <label for="p-radio4">右左</label>
    </div>
  </div>
</aside>
<svg id="schedule"></svg>
<script id="js">
var defaultFlowOption={
  curve:d3["curveBasis"],
  arrowhead:"vee",
  labelpos:"c",
  rankdir:"LR"
}
$(".viewtitle .down").click(function(){
  $(".viewtitle .chart-des").toggle(function(){
     var icon=$(this).is(':visible')?"&#xe63d;":"&#xe63e;"; 
     $(".viewtitle .down").html(icon);
  });
});

$(".btn-setting").click(function(){
  $(".aside-container").toggle();
});

$(".magic-radio").change(function() {
  var name=$(this).parent().attr("name");
  var value=this.value;
  if(name=="curve"){
     defaultFlowOption[name]=d3[value];
  }else{
     defaultFlowOption[name]=value;
  }
  schedulestory.changeSetting();
});
var schedulestory = new dagred3Story("#schedule");
schedulestory.initFlow();
</script>
</body>
</html>
